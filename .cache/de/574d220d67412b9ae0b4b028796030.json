{"id":"../node_modules/controlkit/lib/component/Pad.js","dependencies":[{"name":"/Users/josephchow/Documents/crossfade-test/package.json","includedInParent":true,"mtime":1568138823929},{"name":"/Users/josephchow/Documents/crossfade-test/node_modules/controlkit/package.json","includedInParent":true,"mtime":1568138823713},{"name":"./Plotter","loc":{"line":1,"column":22},"parent":"/Users/josephchow/Documents/crossfade-test/node_modules/controlkit/lib/component/Pad.js","resolved":"/Users/josephchow/Documents/crossfade-test/node_modules/controlkit/lib/component/Plotter.js"},{"name":"../core/document/Mouse","loc":{"line":2,"column":20},"parent":"/Users/josephchow/Documents/crossfade-test/node_modules/controlkit/lib/component/Pad.js","resolved":"/Users/josephchow/Documents/crossfade-test/node_modules/controlkit/lib/core/document/Mouse.js"},{"name":"../core/event/Event","loc":{"line":4,"column":29},"parent":"/Users/josephchow/Documents/crossfade-test/node_modules/controlkit/lib/component/Pad.js","resolved":"/Users/josephchow/Documents/crossfade-test/node_modules/controlkit/lib/core/event/Event.js"},{"name":"../core/document/DocumentEvent","loc":{"line":5,"column":29},"parent":"/Users/josephchow/Documents/crossfade-test/node_modules/controlkit/lib/component/Pad.js","resolved":"/Users/josephchow/Documents/crossfade-test/node_modules/controlkit/lib/core/document/DocumentEvent.js"},{"name":"../core/ComponentEvent","loc":{"line":6,"column":29},"parent":"/Users/josephchow/Documents/crossfade-test/node_modules/controlkit/lib/component/Pad.js","resolved":"/Users/josephchow/Documents/crossfade-test/node_modules/controlkit/lib/core/ComponentEvent.js"}],"generated":{"js":"var Plotter = require('./Plotter');\nvar Mouse = require('../core/document/Mouse');\n\nvar Event_         = require('../core/event/Event'),\n    DocumentEvent  = require('../core/document/DocumentEvent'),\n    ComponentEvent = require('../core/ComponentEvent');\n\nvar DEFAULT_BOUNDS_X = [-1,1],\n    DEFAULT_BOUNDS_Y = [-1,1],\n    DEFAULT_LABEL_X  = '',\n    DEFAULT_LABEL_Y  = '';\n\nfunction Pad(parent, object, value, params) {\n    Plotter.apply(this,arguments);\n\n    params            = params            || {};\n    params.boundsX    = params.boundsX    || DEFAULT_BOUNDS_X;\n    params.boundsY    = params.boundsY    || DEFAULT_BOUNDS_Y;\n    params.labelX     = params.labelX     || DEFAULT_LABEL_X;\n    params.labelY     = params.labelY     || DEFAULT_LABEL_Y;\n\n    params.showCross  = params.showCross  || true;\n\n\n    this._onChange     = params.onChange || this._onChange;\n    this._onFinish     = params.onFinish || function(){};\n\n    this._boundsX      = params.boundsX;\n    this._boundsY      = params.boundsY;\n    this._labelAxisX   = params.labelX != '' && params.labelX != 'none' ? params.labelX : null;\n    this._labelAxisY   = params.labelY != '' && params.labelY != 'none' ? params.labelY : null;\n\n    var path = this._path;\n        path.style.strokeWidth = 1;\n        path.style.stroke      = '#363c40';\n\n    this._grid.style.stroke = 'rgb(25,25,25)';\n\n    this._svgPos = [0,0];\n\n\n    var handle = this._handle = this._svgRoot.appendChild(this._createSVGObject('g'));\n    var handleCircle0 = handle.appendChild(this._createSVGObject('circle'));\n        handleCircle0.setAttribute('r',String(11));\n        handleCircle0.setAttribute('fill','rgba(0,0,0,0.05)');\n    var handleCircle1 = handle.appendChild(this._createSVGObject('circle'));\n        handleCircle1.setAttribute('r',String(10));\n        handleCircle1.setAttribute('fill','rgb(83,93,98)');\n\n    var handleCircle2 = handle.appendChild(this._createSVGObject('circle'));\n        handleCircle2.setAttribute('r',String(9));\n        handleCircle2.setAttribute('fill','rgb(57,69,76)');\n        handleCircle2.setAttribute('cy',String(0.75));\n\n    var handleCircle3 = handle.appendChild(this._createSVGObject('circle'));\n        handleCircle3.setAttribute('r',String(10));\n        handleCircle3.setAttribute('stroke','rgb(17,19,20)');\n        handleCircle3.setAttribute('stroke-width',String(1));\n        handleCircle3.setAttribute('fill','none');\n\n    var handleCircle4 = handle.appendChild(this._createSVGObject('circle'));\n        handleCircle4.setAttribute('r',String(6));\n        handleCircle4.setAttribute('fill','rgb(30,34,36)');\n    var handleCircle5 = handle.appendChild(this._createSVGObject('circle'));\n        handleCircle5.setAttribute('r',String(3));\n        handleCircle5.setAttribute('fill','rgb(255,255,255)');\n\n        handle.setAttribute('tranform','translate(0 0)');\n\n    this._svg.addEventListener(DocumentEvent.MOUSE_DOWN,this._onDragStart.bind(this),false);\n    this._drawValue(this._obj[this._key]);\n}\nPad.prototype = Object.create(Plotter.prototype);\nPad.prototype.constructor = Pad;\n\nPad.prototype._onDragStart = function () {\n    var svgPos = this._svgPos;\n    svgPos[0] = 0;\n    svgPos[1] = 0;\n\n    //skip to container\n    var element = this._svg.parentNode;\n\n    while (element) {\n        svgPos[0] += element.offsetLeft;\n        svgPos[1] += element.offsetTop;\n        element = element.offsetParent;\n    }\n\n    var eventMove = DocumentEvent.MOUSE_MOVE,\n        eventUp   = DocumentEvent.MOUSE_UP;\n\n    var onDrag = function () {\n        this._drawValueInput();\n        this.applyValue();\n        this._onChange();\n    }.bind(this);\n\n    var onDragEnd = function () {\n        this.pushHistoryState();\n        this._drawValueInput();\n        this.applyValue();\n        this._onFinish();\n\n        document.removeEventListener(eventMove, onDrag, false);\n        document.removeEventListener(eventUp, onDragEnd, false);\n    }.bind(this);\n\n    document.addEventListener(eventMove, onDrag,    false);\n    document.addEventListener(eventUp,   onDragEnd, false);\n\n    this._drawValueInput();\n    this.applyValue();\n    this._onChange();\n};\n\nPad.prototype._redraw = function () {\n    this._drawValue(this._obj[this._key]);\n};\n\nPad.prototype._drawValueInput = function () {\n    this._drawValue(this._getMouseNormalized());\n};\n\nPad.prototype._drawValue = function (value) {\n    this._obj[this._key] = value;\n    this._drawGrid();\n    this._drawPoint();\n};\n\nPad.prototype._drawGrid = function () {\n    var svgSize = Number(this._svg.getAttribute('width')),\n        svgMidX = Math.floor(svgSize * 0.5),\n        svgMidY = Math.floor(svgSize * 0.5);\n\n    var pathCmd = '';\n    pathCmd += this._pathCmdLine(0, svgMidY, svgSize, svgMidY);\n    pathCmd += this._pathCmdLine(svgMidX, 0, svgMidX, svgSize);\n\n    this._grid.setAttribute('d', pathCmd);\n};\n\n\nPad.prototype._drawPoint = function () {\n    var svgSize = Number(this._svg.getAttribute('width'));\n\n    var value = this._obj[this._key];\n\n    var localX = ( 0.5 + value[0] * 0.5 ) * svgSize,\n        localY = ( 0.5 + -value[1] * 0.5 ) * svgSize;\n\n    var pathCmd = '';\n        pathCmd += this._pathCmdLine(0, localY, svgSize, localY);\n        pathCmd += this._pathCmdLine(localX, 0, localX, svgSize);\n\n    this._path.setAttribute('d', pathCmd);\n    this._handle.setAttribute('transform', 'translate(' + localX + ' ' + localY + ')');\n};\n\nPad.prototype._getMouseNormalized = function () {\n    var offset = this._svgPos,\n        mouse = Mouse.get().getPosition(),\n        svgSize = Number(this._svg.getAttribute('width'));\n\n    return [-1 + Math.max(0, Math.min(mouse[0] - offset[0], svgSize)) / svgSize * 2,\n            ( 1 - Math.max(0, Math.min(mouse[1] - offset[1], svgSize)) / svgSize * 2)];\n\n};\n\nPad.prototype.applyValue = function () {\n    this.dispatchEvent(new Event_(this, ComponentEvent.VALUE_UPDATED, null));\n};\n\nPad.prototype.onValueUpdate = function (e) {\n    if (e.data.origin == this)return;\n    this._drawValue(this._obj[this._key]);\n};\n\nmodule.exports = Pad;\n"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":2,"column":0},"generated":{"line":2,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":3,"column":0},"generated":{"line":3,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":4,"column":0},"generated":{"line":4,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":5,"column":0},"generated":{"line":5,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":6,"column":0},"generated":{"line":6,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":7,"column":0},"generated":{"line":7,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":8,"column":0},"generated":{"line":8,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":9,"column":0},"generated":{"line":9,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":10,"column":0},"generated":{"line":10,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":11,"column":0},"generated":{"line":11,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":12,"column":0},"generated":{"line":12,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":13,"column":0},"generated":{"line":13,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":14,"column":0},"generated":{"line":14,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":15,"column":0},"generated":{"line":15,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":16,"column":0},"generated":{"line":16,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":17,"column":0},"generated":{"line":17,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":18,"column":0},"generated":{"line":18,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":19,"column":0},"generated":{"line":19,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":20,"column":0},"generated":{"line":20,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":21,"column":0},"generated":{"line":21,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":22,"column":0},"generated":{"line":22,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":23,"column":0},"generated":{"line":23,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":24,"column":0},"generated":{"line":24,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":25,"column":0},"generated":{"line":25,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":26,"column":0},"generated":{"line":26,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":27,"column":0},"generated":{"line":27,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":28,"column":0},"generated":{"line":28,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":29,"column":0},"generated":{"line":29,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":30,"column":0},"generated":{"line":30,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":31,"column":0},"generated":{"line":31,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":32,"column":0},"generated":{"line":32,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":33,"column":0},"generated":{"line":33,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":34,"column":0},"generated":{"line":34,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":35,"column":0},"generated":{"line":35,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":36,"column":0},"generated":{"line":36,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":37,"column":0},"generated":{"line":37,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":38,"column":0},"generated":{"line":38,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":39,"column":0},"generated":{"line":39,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":40,"column":0},"generated":{"line":40,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":41,"column":0},"generated":{"line":41,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":42,"column":0},"generated":{"line":42,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":43,"column":0},"generated":{"line":43,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":44,"column":0},"generated":{"line":44,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":45,"column":0},"generated":{"line":45,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":46,"column":0},"generated":{"line":46,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":47,"column":0},"generated":{"line":47,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":48,"column":0},"generated":{"line":48,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":49,"column":0},"generated":{"line":49,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":50,"column":0},"generated":{"line":50,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":51,"column":0},"generated":{"line":51,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":52,"column":0},"generated":{"line":52,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":53,"column":0},"generated":{"line":53,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":54,"column":0},"generated":{"line":54,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":55,"column":0},"generated":{"line":55,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":56,"column":0},"generated":{"line":56,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":57,"column":0},"generated":{"line":57,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":58,"column":0},"generated":{"line":58,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":59,"column":0},"generated":{"line":59,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":60,"column":0},"generated":{"line":60,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":61,"column":0},"generated":{"line":61,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":62,"column":0},"generated":{"line":62,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":63,"column":0},"generated":{"line":63,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":64,"column":0},"generated":{"line":64,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":65,"column":0},"generated":{"line":65,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":66,"column":0},"generated":{"line":66,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":67,"column":0},"generated":{"line":67,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":68,"column":0},"generated":{"line":68,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":69,"column":0},"generated":{"line":69,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":70,"column":0},"generated":{"line":70,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":71,"column":0},"generated":{"line":71,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":72,"column":0},"generated":{"line":72,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":73,"column":0},"generated":{"line":73,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":74,"column":0},"generated":{"line":74,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":75,"column":0},"generated":{"line":75,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":76,"column":0},"generated":{"line":76,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":77,"column":0},"generated":{"line":77,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":78,"column":0},"generated":{"line":78,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":79,"column":0},"generated":{"line":79,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":80,"column":0},"generated":{"line":80,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":81,"column":0},"generated":{"line":81,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":82,"column":0},"generated":{"line":82,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":83,"column":0},"generated":{"line":83,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":84,"column":0},"generated":{"line":84,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":85,"column":0},"generated":{"line":85,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":86,"column":0},"generated":{"line":86,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":87,"column":0},"generated":{"line":87,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":88,"column":0},"generated":{"line":88,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":89,"column":0},"generated":{"line":89,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":90,"column":0},"generated":{"line":90,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":91,"column":0},"generated":{"line":91,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":92,"column":0},"generated":{"line":92,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":93,"column":0},"generated":{"line":93,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":94,"column":0},"generated":{"line":94,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":95,"column":0},"generated":{"line":95,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":96,"column":0},"generated":{"line":96,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":97,"column":0},"generated":{"line":97,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":98,"column":0},"generated":{"line":98,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":99,"column":0},"generated":{"line":99,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":100,"column":0},"generated":{"line":100,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":101,"column":0},"generated":{"line":101,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":102,"column":0},"generated":{"line":102,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":103,"column":0},"generated":{"line":103,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":104,"column":0},"generated":{"line":104,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":105,"column":0},"generated":{"line":105,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":106,"column":0},"generated":{"line":106,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":107,"column":0},"generated":{"line":107,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":108,"column":0},"generated":{"line":108,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":109,"column":0},"generated":{"line":109,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":110,"column":0},"generated":{"line":110,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":111,"column":0},"generated":{"line":111,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":112,"column":0},"generated":{"line":112,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":113,"column":0},"generated":{"line":113,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":114,"column":0},"generated":{"line":114,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":115,"column":0},"generated":{"line":115,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":116,"column":0},"generated":{"line":116,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":117,"column":0},"generated":{"line":117,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":118,"column":0},"generated":{"line":118,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":119,"column":0},"generated":{"line":119,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":120,"column":0},"generated":{"line":120,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":121,"column":0},"generated":{"line":121,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":122,"column":0},"generated":{"line":122,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":123,"column":0},"generated":{"line":123,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":124,"column":0},"generated":{"line":124,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":125,"column":0},"generated":{"line":125,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":126,"column":0},"generated":{"line":126,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":127,"column":0},"generated":{"line":127,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":128,"column":0},"generated":{"line":128,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":129,"column":0},"generated":{"line":129,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":130,"column":0},"generated":{"line":130,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":131,"column":0},"generated":{"line":131,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":132,"column":0},"generated":{"line":132,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":133,"column":0},"generated":{"line":133,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":134,"column":0},"generated":{"line":134,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":135,"column":0},"generated":{"line":135,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":136,"column":0},"generated":{"line":136,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":137,"column":0},"generated":{"line":137,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":138,"column":0},"generated":{"line":138,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":139,"column":0},"generated":{"line":139,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":140,"column":0},"generated":{"line":140,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":141,"column":0},"generated":{"line":141,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":142,"column":0},"generated":{"line":142,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":143,"column":0},"generated":{"line":143,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":144,"column":0},"generated":{"line":144,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":145,"column":0},"generated":{"line":145,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":146,"column":0},"generated":{"line":146,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":147,"column":0},"generated":{"line":147,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":148,"column":0},"generated":{"line":148,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":149,"column":0},"generated":{"line":149,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":150,"column":0},"generated":{"line":150,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":151,"column":0},"generated":{"line":151,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":152,"column":0},"generated":{"line":152,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":153,"column":0},"generated":{"line":153,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":154,"column":0},"generated":{"line":154,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":155,"column":0},"generated":{"line":155,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":156,"column":0},"generated":{"line":156,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":157,"column":0},"generated":{"line":157,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":158,"column":0},"generated":{"line":158,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":159,"column":0},"generated":{"line":159,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":160,"column":0},"generated":{"line":160,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":161,"column":0},"generated":{"line":161,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":162,"column":0},"generated":{"line":162,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":163,"column":0},"generated":{"line":163,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":164,"column":0},"generated":{"line":164,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":165,"column":0},"generated":{"line":165,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":166,"column":0},"generated":{"line":166,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":167,"column":0},"generated":{"line":167,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":168,"column":0},"generated":{"line":168,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":169,"column":0},"generated":{"line":169,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":170,"column":0},"generated":{"line":170,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":171,"column":0},"generated":{"line":171,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":172,"column":0},"generated":{"line":172,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":173,"column":0},"generated":{"line":173,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":174,"column":0},"generated":{"line":174,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":175,"column":0},"generated":{"line":175,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":176,"column":0},"generated":{"line":176,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":177,"column":0},"generated":{"line":177,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":178,"column":0},"generated":{"line":178,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":179,"column":0},"generated":{"line":179,"column":0}},{"source":"../node_modules/controlkit/lib/component/Pad.js","original":{"line":180,"column":0},"generated":{"line":180,"column":0}}],"sources":{"../node_modules/controlkit/lib/component/Pad.js":"var Plotter = require('./Plotter');\nvar Mouse = require('../core/document/Mouse');\n\nvar Event_         = require('../core/event/Event'),\n    DocumentEvent  = require('../core/document/DocumentEvent'),\n    ComponentEvent = require('../core/ComponentEvent');\n\nvar DEFAULT_BOUNDS_X = [-1,1],\n    DEFAULT_BOUNDS_Y = [-1,1],\n    DEFAULT_LABEL_X  = '',\n    DEFAULT_LABEL_Y  = '';\n\nfunction Pad(parent, object, value, params) {\n    Plotter.apply(this,arguments);\n\n    params            = params            || {};\n    params.boundsX    = params.boundsX    || DEFAULT_BOUNDS_X;\n    params.boundsY    = params.boundsY    || DEFAULT_BOUNDS_Y;\n    params.labelX     = params.labelX     || DEFAULT_LABEL_X;\n    params.labelY     = params.labelY     || DEFAULT_LABEL_Y;\n\n    params.showCross  = params.showCross  || true;\n\n\n    this._onChange     = params.onChange || this._onChange;\n    this._onFinish     = params.onFinish || function(){};\n\n    this._boundsX      = params.boundsX;\n    this._boundsY      = params.boundsY;\n    this._labelAxisX   = params.labelX != '' && params.labelX != 'none' ? params.labelX : null;\n    this._labelAxisY   = params.labelY != '' && params.labelY != 'none' ? params.labelY : null;\n\n    var path = this._path;\n        path.style.strokeWidth = 1;\n        path.style.stroke      = '#363c40';\n\n    this._grid.style.stroke = 'rgb(25,25,25)';\n\n    this._svgPos = [0,0];\n\n\n    var handle = this._handle = this._svgRoot.appendChild(this._createSVGObject('g'));\n    var handleCircle0 = handle.appendChild(this._createSVGObject('circle'));\n        handleCircle0.setAttribute('r',String(11));\n        handleCircle0.setAttribute('fill','rgba(0,0,0,0.05)');\n    var handleCircle1 = handle.appendChild(this._createSVGObject('circle'));\n        handleCircle1.setAttribute('r',String(10));\n        handleCircle1.setAttribute('fill','rgb(83,93,98)');\n\n    var handleCircle2 = handle.appendChild(this._createSVGObject('circle'));\n        handleCircle2.setAttribute('r',String(9));\n        handleCircle2.setAttribute('fill','rgb(57,69,76)');\n        handleCircle2.setAttribute('cy',String(0.75));\n\n    var handleCircle3 = handle.appendChild(this._createSVGObject('circle'));\n        handleCircle3.setAttribute('r',String(10));\n        handleCircle3.setAttribute('stroke','rgb(17,19,20)');\n        handleCircle3.setAttribute('stroke-width',String(1));\n        handleCircle3.setAttribute('fill','none');\n\n    var handleCircle4 = handle.appendChild(this._createSVGObject('circle'));\n        handleCircle4.setAttribute('r',String(6));\n        handleCircle4.setAttribute('fill','rgb(30,34,36)');\n    var handleCircle5 = handle.appendChild(this._createSVGObject('circle'));\n        handleCircle5.setAttribute('r',String(3));\n        handleCircle5.setAttribute('fill','rgb(255,255,255)');\n\n        handle.setAttribute('tranform','translate(0 0)');\n\n    this._svg.addEventListener(DocumentEvent.MOUSE_DOWN,this._onDragStart.bind(this),false);\n    this._drawValue(this._obj[this._key]);\n}\nPad.prototype = Object.create(Plotter.prototype);\nPad.prototype.constructor = Pad;\n\nPad.prototype._onDragStart = function () {\n    var svgPos = this._svgPos;\n    svgPos[0] = 0;\n    svgPos[1] = 0;\n\n    //skip to container\n    var element = this._svg.parentNode;\n\n    while (element) {\n        svgPos[0] += element.offsetLeft;\n        svgPos[1] += element.offsetTop;\n        element = element.offsetParent;\n    }\n\n    var eventMove = DocumentEvent.MOUSE_MOVE,\n        eventUp   = DocumentEvent.MOUSE_UP;\n\n    var onDrag = function () {\n        this._drawValueInput();\n        this.applyValue();\n        this._onChange();\n    }.bind(this);\n\n    var onDragEnd = function () {\n        this.pushHistoryState();\n        this._drawValueInput();\n        this.applyValue();\n        this._onFinish();\n\n        document.removeEventListener(eventMove, onDrag, false);\n        document.removeEventListener(eventUp, onDragEnd, false);\n    }.bind(this);\n\n    document.addEventListener(eventMove, onDrag,    false);\n    document.addEventListener(eventUp,   onDragEnd, false);\n\n    this._drawValueInput();\n    this.applyValue();\n    this._onChange();\n};\n\nPad.prototype._redraw = function () {\n    this._drawValue(this._obj[this._key]);\n};\n\nPad.prototype._drawValueInput = function () {\n    this._drawValue(this._getMouseNormalized());\n};\n\nPad.prototype._drawValue = function (value) {\n    this._obj[this._key] = value;\n    this._drawGrid();\n    this._drawPoint();\n};\n\nPad.prototype._drawGrid = function () {\n    var svgSize = Number(this._svg.getAttribute('width')),\n        svgMidX = Math.floor(svgSize * 0.5),\n        svgMidY = Math.floor(svgSize * 0.5);\n\n    var pathCmd = '';\n    pathCmd += this._pathCmdLine(0, svgMidY, svgSize, svgMidY);\n    pathCmd += this._pathCmdLine(svgMidX, 0, svgMidX, svgSize);\n\n    this._grid.setAttribute('d', pathCmd);\n};\n\n\nPad.prototype._drawPoint = function () {\n    var svgSize = Number(this._svg.getAttribute('width'));\n\n    var value = this._obj[this._key];\n\n    var localX = ( 0.5 + value[0] * 0.5 ) * svgSize,\n        localY = ( 0.5 + -value[1] * 0.5 ) * svgSize;\n\n    var pathCmd = '';\n        pathCmd += this._pathCmdLine(0, localY, svgSize, localY);\n        pathCmd += this._pathCmdLine(localX, 0, localX, svgSize);\n\n    this._path.setAttribute('d', pathCmd);\n    this._handle.setAttribute('transform', 'translate(' + localX + ' ' + localY + ')');\n};\n\nPad.prototype._getMouseNormalized = function () {\n    var offset = this._svgPos,\n        mouse = Mouse.get().getPosition(),\n        svgSize = Number(this._svg.getAttribute('width'));\n\n    return [-1 + Math.max(0, Math.min(mouse[0] - offset[0], svgSize)) / svgSize * 2,\n            ( 1 - Math.max(0, Math.min(mouse[1] - offset[1], svgSize)) / svgSize * 2)];\n\n};\n\nPad.prototype.applyValue = function () {\n    this.dispatchEvent(new Event_(this, ComponentEvent.VALUE_UPDATED, null));\n};\n\nPad.prototype.onValueUpdate = function (e) {\n    if (e.data.origin == this)return;\n    this._drawValue(this._obj[this._key]);\n};\n\nmodule.exports = Pad;\n"},"lineCount":180}},"error":null,"hash":"f59641220e481a44e10f1b59155aa145","cacheData":{"env":{}}}